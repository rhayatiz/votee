import{a as p,r as S,c as lr,u as We,b as ar,d as ir,e as cr,R as H,B as z,j as o,T as P,A as je,f as k,g as ur,H as dr}from"./app-21643015.js";import{u as fr,d as pr,e as gr,G as T,c as M,b as Qe,f as oe,N as vr,C as hr,T as mr,a as yr,F as br}from"./Footer-6f804e0e.js";import{g as J,S as jr,L as Oe}from"./Stack-53bb87ca.js";import{T as we,L as wr,M as xr,I as _r,a as Or,A as Sr}from"./index.esm-5f83b947.js";import{B as Y}from"./Button-e3083cd2.js";import{u as $r,M as Pr,a as kr}from"./index.esm-d9577316.js";import{T as Cr}from"./Tooltip-e3b78547.js";const Er={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function zr(){const e=p.useRef(0),r=p.useRef(null),[t,s]=p.useState(Er),n=p.useMemo(()=>typeof window<"u"?new ResizeObserver(a=>{const i=a[0];i&&(cancelAnimationFrame(e.current),e.current=requestAnimationFrame(()=>{r.current&&s(i.contentRect)}))}):null,[]);return p.useEffect(()=>(r.current&&n.observe(r.current),()=>{n.disconnect(),e.current&&cancelAnimationFrame(e.current)}),[r.current]),[r,t]}var Nr=Object.defineProperty,Rr=Object.defineProperties,Ar=Object.getOwnPropertyDescriptors,Se=Object.getOwnPropertySymbols,Ir=Object.prototype.hasOwnProperty,Vr=Object.prototype.propertyIsEnumerable,$e=(e,r,t)=>r in e?Nr(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,se=(e,r)=>{for(var t in r||(r={}))Ir.call(r,t)&&$e(e,t,r[t]);if(Se)for(var t of Se(r))Vr.call(r,t)&&$e(e,t,r[t]);return e},Fr=(e,r)=>Rr(e,Ar(r));const le=4,Pe={xs:`${S(3)} ${S(6)}`,sm:`${S(5)} ${S(10)}`,md:`${S(7)} ${S(14)}`,lg:`${S(9)} ${S(16)}`,xl:`${S(12)} ${S(20)}`};var Mr=lr((e,{fullWidth:r,color:t,radius:s,shouldAnimate:n,transitionDuration:a,transitionTimingFunction:i,orientation:d},{size:c})=>{const y=d==="vertical",f=e.fn.variant({variant:"filled",color:t});return{label:Fr(se(se({ref:J("label")},e.fn.focusStyles()),e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",borderRadius:e.fn.radius(s),fontWeight:500,fontSize:c in e.fontSizes?e.fontSizes[c]:e.fontSizes.sm,cursor:"pointer",display:"block",textAlign:"center",padding:Pe[c in Pe?c:"sm"],whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7],transition:`color ${n?0:a}ms ${i||e.transitionTimingFunction}`,"&:hover":{color:e.colorScheme==="dark"?e.colors.dark[0]:e.black},"&[data-disabled]":{"&, &:hover":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],cursor:"not-allowed",pointerEvents:"none"}},"&[data-active]":{"&, &:hover":{color:t||e.colorScheme==="dark"?e.white:e.black}}}),control:{ref:J("control"),position:"relative",boxSizing:"border-box",flex:1,zIndex:2,transition:`border-left-color ${n?0:a}ms ${i||e.transitionTimingFunction}`,"&:not(:first-of-type)":{borderStyle:"solid",borderWidth:y?`${S(1)} 0 0 0`:`0 0 0 ${S(1)}`,borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}},input:{height:0,width:0,position:"absolute",overflow:"hidden",whiteSpace:"nowrap",opacity:0,"&:focus":{outline:"none",[`& + .${J("label")}`]:se({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),"&:focus:not(:focus-visible)":{[`& + .${J("label")}`]:se({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)}},"&:disabled + label":{"&, &:hover":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],cursor:"not-allowed",pointerEvents:"none"}}},root:{position:"relative",display:r||y?"flex":"inline-flex",width:y&&!r?"max-content":"auto",flexDirection:y?"column":"row",backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[1],borderRadius:e.fn.radius(s),overflow:"hidden",padding:le},controlActive:{borderLeftColor:"transparent !important",borderTopColor:"transparent !important",[`& + .${J("control")}`]:{[y?"borderTopColor":"borderLeftColor"]:"transparent !important"},borderRadius:e.fn.radius(s),boxShadow:n?t||e.colorScheme==="dark"?"none":e.shadows.xs:void 0,backgroundColor:n?t?f.background:e.colorScheme==="dark"?e.colors.dark[5]:e.white:void 0},indicator:{boxSizing:"border-box",borderRadius:e.fn.radius(s),position:"absolute",zIndex:1,boxShadow:t||e.colorScheme==="dark"?"none":e.shadows.xs,transition:`transform ${n?0:a}ms ${e.transitionTimingFunction}, width ${n?0:a/2}ms ${i||e.transitionTimingFunction}`,backgroundColor:t?f.background:e.colorScheme==="dark"?e.colors.dark[5]:e.white}}});const Tr=Mr;var qr=Object.defineProperty,ie=Object.getOwnPropertySymbols,Ke=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable,ke=(e,r,t)=>r in e?qr(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,Dr=(e,r)=>{for(var t in r||(r={}))Ke.call(r,t)&&ke(e,t,r[t]);if(ie)for(var t of ie(r))Ge.call(r,t)&&ke(e,t,r[t]);return e},Lr=(e,r)=>{var t={};for(var s in e)Ke.call(e,s)&&r.indexOf(s)<0&&(t[s]=e[s]);if(e!=null&&ie)for(var s of ie(e))r.indexOf(s)<0&&Ge.call(e,s)&&(t[s]=e[s]);return t};const Br={disabled:!1,size:"sm",transitionDuration:200},Ue=p.forwardRef((e,r)=>{var t,s,n,a;const i=We("SegmentedControl",Br,e),{className:d,disabled:c,data:y,name:f,value:u,onChange:b,color:m,fullWidth:x,radius:_,size:j,transitionDuration:$,transitionTimingFunction:N,classNames:q,styles:de,defaultValue:Q,orientation:K,unstyled:Z,variant:I,readOnly:D}=i,L=Lr(i,["className","disabled","data","name","value","onChange","color","fullWidth","radius","size","transitionDuration","transitionTimingFunction","classNames","styles","defaultValue","orientation","unstyled","variant","readOnly"]),G=ar(),fe=ir(),pe=G.respectReducedMotion?fe:!1,V=y.map(h=>typeof h=="string"?{label:h,value:h}:h),ee=p.useRef(),[U,re]=p.useState(!1),[C,ge]=fr({value:u,defaultValue:Q,finalValue:Array.isArray(V)&&(a=(n=(t=V.find(h=>!h.disabled))==null?void 0:t.value)!=null?n:(s=V[0])==null?void 0:s.value)!=null?a:null,onChange:b}),{classes:R,cx:te}=Tr({fullWidth:x,color:m,radius:_,shouldAnimate:pe||!U,transitionDuration:$,transitionTimingFunction:N,orientation:K},{name:"SegmentedControl",classNames:q,styles:de,unstyled:Z,variant:I,size:j}),[B,ve]=p.useState({width:0,height:0,translate:[0,0]}),X=pr(f),l=p.useRef({}),[g,v]=zr();cr(()=>{ee.current?re(!0):(ee.current=!0,re(!1))}),p.useEffect(()=>{if(C in l.current&&g.current){const h=l.current[C],O=h.getBoundingClientRect(),xe=h.offsetWidth/O.width,_e=O.width*xe||0,sr=O.height*xe||0,nr=v.width-h.parentElement.offsetLeft+le-_e,or=h.parentElement.offsetLeft-le;ve({width:_e,height:sr,translate:[G.dir==="rtl"?nr:or,h.parentElement.offsetTop-le]})}},[C,v]);const w=V.map(h=>H.createElement("div",{className:te(R.control,{[R.controlActive]:C===h.value}),key:h.value},H.createElement("input",{className:R.input,disabled:c||h.disabled,type:"radio",name:X,value:h.value,id:`${X}-${h.value}`,checked:C===h.value,onChange:()=>!D&&ge(h.value)}),H.createElement("label",{className:R.label,"data-active":C===h.value&&!(c||h.disabled)||void 0,"data-disabled":c||h.disabled||void 0,htmlFor:`${X}-${h.value}`,ref:O=>{l.current[h.value]=O}},h.label))),F=gr(g,r);return V.length===0?null:H.createElement(z,Dr({className:te(R.root,d),ref:F},L),typeof C=="string"&&U&&H.createElement(z,{component:"span",className:R.indicator,sx:{width:B.width,height:B.height,transform:`translate(${B.translate[0]}px, ${B.translate[1]}px)`}}),w)});Ue.displayName="@mantine/core/SegmentedControl";var Hr=Object.defineProperty,ce=Object.getOwnPropertySymbols,Xe=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable,Ce=(e,r,t)=>r in e?Hr(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,Wr=(e,r)=>{for(var t in r||(r={}))Xe.call(r,t)&&Ce(e,t,r[t]);if(ce)for(var t of ce(r))Je.call(r,t)&&Ce(e,t,r[t]);return e},Qr=(e,r)=>{var t={};for(var s in e)Xe.call(e,s)&&r.indexOf(s)<0&&(t[s]=e[s]);if(e!=null&&ce)for(var s of ce(e))r.indexOf(s)<0&&Je.call(e,s)&&(t[s]=e[s]);return t};const Kr={w:0,h:0},ae=p.forwardRef((e,r)=>{const t=We("Space",Kr,e),{w:s,h:n}=t,a=Qr(t,["w","h"]);return H.createElement(z,Wr({ref:r,w:s,miw:s,h:n,mih:n},a))});ae.displayName="@mantine/core/Space";function Ye(e){return T({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 0 0-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attr:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]})(e)}function Ze(e){return T({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]})(e)}function er(e){return T({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 2a.5.5 0 0 1 .5-.5c.862 0 1.573.287 2.06.566.174.099.321.198.44.286.119-.088.266-.187.44-.286A4.165 4.165 0 0 1 10.5 1.5a.5.5 0 0 1 0 1c-.638 0-1.177.213-1.564.434a3.49 3.49 0 0 0-.436.294V7.5H9a.5.5 0 0 1 0 1h-.5v4.272c.1.08.248.187.436.294.387.221.926.434 1.564.434a.5.5 0 0 1 0 1 4.165 4.165 0 0 1-2.06-.566A4.561 4.561 0 0 1 8 13.65a4.561 4.561 0 0 1-.44.285 4.165 4.165 0 0 1-2.06.566.5.5 0 0 1 0-1c.638 0 1.177-.213 1.564-.434.188-.107.335-.214.436-.294V8.5H7a.5.5 0 0 1 0-1h.5V3.228a3.49 3.49 0 0 0-.436-.294A3.166 3.166 0 0 0 5.5 2.5.5.5 0 0 1 5 2zm3.352 1.355zm-.704 9.29z"}}]})(e)}function Gr(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 5c-3.859 0-7 3.141-7 7s3.141 7 7 7 7-3.141 7-7-3.141-7-7-7zm0 12c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5z"}},{tag:"path",attr:{d:"M12 9c-1.627 0-3 1.373-3 3s1.373 3 3 3 3-1.373 3-3-1.373-3-3-3z"}}]})(e)}function Ur(e){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 2H8c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2V4c0-1.103-.897-2-2-2zM8 16V4h12l.002 12H8z"}},{tag:"path",attr:{d:"M4 8H2v12c0 1.103.897 2 2 2h12v-2H4V8zm8.933 3.519-1.726-1.726-1.414 1.414 3.274 3.274 5.702-6.84-1.538-1.282z"}}]})(e)}function Xr({changeHandler:e}){const r=[{value:"radio",label:o.jsxs(M,{children:[o.jsx(Gr,{className:"relative top-[2px] mr-1"}),o.jsx(P,{fz:"xs",weight:300,children:"Unique"})]})},{value:"checkbox",label:o.jsxs(M,{children:[o.jsx(Ur,{className:"relative top-[2px] mr-1"}),o.jsx(P,{fz:"xs",weight:300,children:"Multiple"})]})},{value:"input",label:o.jsxs(M,{children:[o.jsx(er,{className:"relative top-[2px] mr-1"}),o.jsx(P,{fz:"xs",weight:300,children:"Saisie"})]})}];return o.jsx(Ue,{onChange:e,size:"sm",data:r})}function Jr(e){return T({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M14 0h-12c-1.1 0-2 0.9-2 2v12c0 1.1 0.9 2 2 2h12c1.1 0 2-0.9 2-2v-12c0-1.1-0.9-2-2-2zM14 14h-12v-12h12v12z"}}]})(e)}function Yr(e){return T({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 14c-3.314 0-6-2.686-6-6s2.686-6 6-6c3.314 0 6 2.686 6 6s-2.686 6-6 6z"}}]})(e)}function Zr({type:e,row:r,index:t,idx:s,removeAnswerHandler:n,form:a,questionKey:i}){const d=e=="checkbox"?o.jsx(Jr,{}):e=="radio"?o.jsx(Yr,{}):o.jsx(er,{}),c=e=="input"?"Label":`Reponse ${t+1}`,y=(u,b)=>b.map(function(m){return m.key}).indexOf(u),f=(u,b,m)=>{const x=[...a.values.questions];var _=y(u,x),j=x[_].answers.map(function(N){return N.key}).indexOf(b);let $=[...a.values.questions[_].answers];$[j].label=m.target.value,a.setFieldValue(`questions.${_}.answers`,$)};return o.jsx(o.Fragment,{children:o.jsxs(M,{children:[o.jsx(we,{mt:"xs",className:"flex-1",onChange:u=>f(i,r.key,u),placeholder:c,icon:d,error:r.error||null,withAsterisk:!0}),t!=0&&t!=1&&o.jsx(Qe,{children:o.jsx(je,{onClick:()=>n(s),children:o.jsx(Ye,{className:"relative top-[2px] left-1 text-red-700",size:18})})})]})})}function et({row:e,idx:r,removeQuestionHandler:t,form:s,questionIndex:n}){const a=f=>{f=="input"?s.setFieldValue(`questions.${n}.answers`,[{id:1,key:k(),label:""}]):s.setFieldValue(`questions.${n}.answers`,[{id:1,key:k(),label:""},{id:2,key:k(),label:""}]),s.setFieldValue(`questions.${n}.type`,f)},i=f=>{const u=[...s.values.questions];u[n].label=f.target.value,s.setFieldValue("questions",u)},d=()=>{const f=s.values.questions[n].answers;let u=1;f.length>0&&(u=f[f.length-1].id+1);let b={key:k(),id:u,label:""};s.setFieldValue(`questions.${n}.answers`,[...f,b])},c=f=>{let u=s.values.questions[n].answers;var b=u.map(function(m){return m.id}).indexOf(f);u.splice(b,1),s.setFieldValue(`questions.${n}.answers`,[...u])},y=()=>o.jsx(oe,{position:"right",mt:"sm",children:o.jsxs(Y,{color:"dark",className:"bg-zinc-500 hover:bg-zinc-600 text-white",size:"xs",onClick:()=>d(),children:[o.jsx(P,{fz:"xs",mr:"xs",children:"Ajouter réponse"}),o.jsx(Ze,{color:"white",size:16})]})});return o.jsxs(z,{className:"mt-8 shadow-md bg-gray-50 px-4 py-2 rounded-lg relative",children:[o.jsx(oe,{position:"right",pos:"absolute",className:"top-1 right-12",children:o.jsx(je,{onClick:()=>t(e.id),variant:"transparent",color:"red",children:o.jsxs(M,{children:[o.jsx(P,{fz:"sm",weight:400,children:"Retirer"}),o.jsx(Ye,{className:"relative top-[2px] left-1",size:16})]})})}),o.jsxs(jr,{children:[o.jsx(we,{label:`Question ${r}`,placeholder:"Quel est votre plat préféré ?",onChange:f=>i(f),error:e.error||null}),o.jsxs(M,{className:"flex-col md:flex-row",justify:"space-between",children:[o.jsx(P,{fz:"sm",weight:400,children:"Réponses"}),o.jsxs(oe,{children:[o.jsx(P,{fz:"xs",weight:300,children:"Type de réponse"}),o.jsx(Xr,{changeHandler:a})]})]}),o.jsxs(z,{className:"relative -top-2",children:[s.values.questions[n].answers.map((f,u)=>o.jsx(Zr,{type:s.values.questions[n].type,questionKey:e.key,row:f,index:u,idx:f.id,form:s,removeAnswerHandler:c},f.key)),s.values.questions[n].type!="input"&&o.jsx(y,{})]})]})]})}function rt(e){const r=e.form,t=()=>o.jsx(oe,{position:"right",mt:"sm",children:o.jsxs(Y,{color:"dark",className:"bg-zinc-700 text-white",size:"sm",onClick:()=>s(),children:[o.jsx(P,{mr:"sm",children:"Ajouter question"}),o.jsx(Ze,{color:"white",size:18})]})}),s=()=>{let a=1,i=r.values.questions;i.length>0&&(a=i[i.length-1].id+1);let d={id:a,key:k(),type:"radio",label:"",answers:[{id:1,key:k(),label:""},{id:2,key:k(),label:""}]};r.setFieldValue("questions",[...i,d])},n=a=>{r.setFieldValue("questions",r.values.questions.filter(i=>i.id!=a))};return o.jsx(o.Fragment,{children:o.jsxs(z,{className:"rounded-lg border border-red-700 mt-11",children:[r.values.questions.map((a,i)=>o.jsx(et,{row:a,idx:i+1,questionIndex:i,removeQuestionHandler:n,form:e.form},a.key)),o.jsx(t,{})]})})}var tt=function e(r,t){if(r===t)return!0;if(r&&t&&typeof r=="object"&&typeof t=="object"){if(r.constructor!==t.constructor)return!1;var s,n,a;if(Array.isArray(r)){if(s=r.length,s!=t.length)return!1;for(n=s;n--!==0;)if(!e(r[n],t[n]))return!1;return!0}if(r.constructor===RegExp)return r.source===t.source&&r.flags===t.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===t.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===t.toString();if(a=Object.keys(r),s=a.length,s!==Object.keys(t).length)return!1;for(n=s;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[n]))return!1;for(n=s;n--!==0;){var i=a[n];if(!e(r[i],t[i]))return!1}return!0}return r!==r&&t!==t};const Ee=ur(tt);function me(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((r,t)=>{const s=e[t];return s!=null&&s!==!1&&(r[t]=s),r},{})}var st=Object.defineProperty,ze=Object.getOwnPropertySymbols,nt=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable,Ne=(e,r,t)=>r in e?st(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,lt=(e,r)=>{for(var t in r||(r={}))nt.call(r,t)&&Ne(e,t,r[t]);if(ze)for(var t of ze(r))ot.call(r,t)&&Ne(e,t,r[t]);return e};function rr(e,r){if(r===null||typeof r!="object")return{};const t=lt({},r);return Object.keys(r).forEach(s=>{s.includes(`${String(e)}.`)&&delete t[s]}),t}const at="__MANTINE_FORM_INDEX__";function Re(e,r){return r?typeof r=="boolean"?r:Array.isArray(r)?r.includes(e.replace(/[.][0-9]/g,`.${at}`)):!1:!1}function Ae(e,r,t){typeof t.value=="object"&&(t.value=W(t.value)),!t.enumerable||t.get||t.set||!t.configurable||!t.writable||r==="__proto__"?Object.defineProperty(e,r,t):e[r]=t.value}function W(e){if(typeof e!="object")return e;var r=0,t,s,n,a=Object.prototype.toString.call(e);if(a==="[object Object]"?n=Object.create(e.__proto__||null):a==="[object Array]"?n=Array(e.length):a==="[object Set]"?(n=new Set,e.forEach(function(i){n.add(W(i))})):a==="[object Map]"?(n=new Map,e.forEach(function(i,d){n.set(W(d),W(i))})):a==="[object Date]"?n=new Date(+e):a==="[object RegExp]"?n=new RegExp(e.source,e.flags):a==="[object DataView]"?n=new e.constructor(W(e.buffer)):a==="[object ArrayBuffer]"?n=e.slice(0):a.slice(-6)==="Array]"&&(n=new e.constructor(e)),n){for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)Ae(n,s[r],Object.getOwnPropertyDescriptor(e,s[r]));for(r=0,s=Object.getOwnPropertyNames(e);r<s.length;r++)Object.hasOwnProperty.call(n,t=s[r])&&n[t]===e[t]||Ae(n,t,Object.getOwnPropertyDescriptor(e,t))}return n||e}function tr(e){return typeof e!="string"?[]:e.split(".")}function ue(e,r,t){const s=tr(e);if(s.length===0)return t;const n=W(t);if(s.length===1)return n[s[0]]=r,n;let a=n[s[0]];for(let i=1;i<s.length-1;i+=1){if(a===void 0)return n;a=a[s[i]]}return a[s[s.length-1]]=r,n}function E(e,r){const t=tr(e);if(t.length===0||typeof r!="object"||r===null)return;let s=r[t[0]];for(let n=1;n<t.length&&s!==void 0;n+=1)s=s[t[n]];return s}function Ie(e){const r=me(e);return{hasErrors:Object.keys(r).length>0,errors:r}}function ye(e,r,t="",s={}){return typeof e!="object"||e===null?s:Object.keys(e).reduce((n,a)=>{const i=e[a],d=`${t===""?"":`${t}.`}${a}`,c=E(d,r);let y=!1;return typeof i=="function"&&(n[d]=i(c,r,d)),typeof i=="object"&&Array.isArray(c)&&(y=!0,c.forEach((f,u)=>ye(i,r,`${d}.${u}`,n))),typeof i=="object"&&typeof c=="object"&&c!==null&&(y||ye(i,r,d,n)),n},s)}function be(e,r){return Ie(typeof e=="function"?e(r):ye(e,r))}function ne(e,r,t){if(typeof e!="string")return{hasError:!1,error:null};const s=be(r,t),n=Object.keys(s.errors).find(a=>e.split(".").every((i,d)=>i===a.split(".")[d]));return{hasError:!!n,error:n?s.errors[n]:null}}function it(e,{from:r,to:t},s){const n=E(e,s);if(!Array.isArray(n))return s;const a=[...n],i=n[r];return a.splice(r,1),a.splice(t,0,i),ue(e,a,s)}var ct=Object.defineProperty,Ve=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable,Fe=(e,r,t)=>r in e?ct(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,ft=(e,r)=>{for(var t in r||(r={}))ut.call(r,t)&&Fe(e,t,r[t]);if(Ve)for(var t of Ve(r))dt.call(r,t)&&Fe(e,t,r[t]);return e};function pt(e,{from:r,to:t},s){const n=`${e}.${r}`,a=`${e}.${t}`,i=ft({},s);return Object.keys(s).every(d=>{let c,y;if(d.startsWith(n)&&(c=d,y=d.replace(n,a)),d.startsWith(a)&&(c=d.replace(a,n),y=d),c&&y){const f=i[c],u=i[y];return u===void 0?delete i[c]:i[c]=u,f===void 0?delete i[y]:i[y]=f,!1}return!0}),i}function gt(e,r,t){const s=E(e,t);return Array.isArray(s)?ue(e,s.filter((n,a)=>a!==r),t):t}var vt=Object.defineProperty,Me=Object.getOwnPropertySymbols,ht=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable,Te=(e,r,t)=>r in e?vt(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,yt=(e,r)=>{for(var t in r||(r={}))ht.call(r,t)&&Te(e,t,r[t]);if(Me)for(var t of Me(r))mt.call(r,t)&&Te(e,t,r[t]);return e};function qe(e,r){const t=e.substring(r.length+1).split(".")[0];return parseInt(t,10)}function De(e,r,t,s){if(r===void 0)return t;const n=`${String(e)}`;let a=t;s===-1&&(a=rr(`${n}.${r}`,a));const i=yt({},a),d=new Set;return Object.entries(a).filter(([c])=>{if(!c.startsWith(`${n}.`))return!1;const y=qe(c,n);return Number.isNaN(y)?!1:y>=r}).forEach(([c,y])=>{const f=qe(c,n),u=c.replace(`${n}.${f}`,`${n}.${f+s}`);i[u]=y,d.add(u),d.has(c)||delete i[c]}),i}function bt(e,r,t,s){const n=E(e,s);if(!Array.isArray(n))return s;const a=[...n];return a.splice(typeof t=="number"?t:a.length,0,r),ue(e,a,s)}function Le(e,r){const t=Object.keys(e);if(typeof r=="string"){const s=t.filter(n=>n.startsWith(`${r}.`));return e[r]||s.some(n=>e[n])||!1}return t.some(s=>e[s])}function jt(e){return r=>{if(!r)e(r);else if(typeof r=="function")e(r);else if(typeof r=="object"&&"nativeEvent"in r){const{currentTarget:t}=r;t instanceof HTMLInputElement?t.type==="checkbox"?e(t.checked):e(t.value):(t instanceof HTMLTextAreaElement||t instanceof HTMLSelectElement)&&e(t.value)}else e(r)}}var wt=Object.defineProperty,xt=Object.defineProperties,_t=Object.getOwnPropertyDescriptors,Be=Object.getOwnPropertySymbols,Ot=Object.prototype.hasOwnProperty,St=Object.prototype.propertyIsEnumerable,He=(e,r,t)=>r in e?wt(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,A=(e,r)=>{for(var t in r||(r={}))Ot.call(r,t)&&He(e,t,r[t]);if(Be)for(var t of Be(r))St.call(r,t)&&He(e,t,r[t]);return e},he=(e,r)=>xt(e,_t(r));function $t({initialValues:e={},initialErrors:r={},initialDirty:t={},initialTouched:s={},clearInputErrorOnChange:n=!0,validateInputOnChange:a=!1,validateInputOnBlur:i=!1,transformValues:d=y=>y,validate:c}={}){const[y,f]=p.useState(s),[u,b]=p.useState(t),[m,x]=p.useState(e),[_,j]=p.useState(me(r)),$=p.useRef(e),N=l=>{$.current=l},q=p.useCallback(()=>f({}),[]),de=l=>{const g=l?A(A({},m),l):m;N(g),b({})},Q=p.useCallback(l=>j(g=>me(typeof l=="function"?l(g):l)),[]),K=p.useCallback(()=>j({}),[]),Z=p.useCallback(()=>{x(e),K(),N(e),b({}),q()},[]),I=p.useCallback((l,g)=>Q(v=>he(A({},v),{[l]:g})),[]),D=p.useCallback(l=>Q(g=>{if(typeof l!="string")return g;const v=A({},g);return delete v[l],v}),[]),L=p.useCallback(l=>b(g=>{if(typeof l!="string")return g;const v=rr(l,g);return delete v[l],v}),[]),G=p.useCallback((l,g)=>{const v=Re(l,a);L(l),f(w=>he(A({},w),{[l]:!0})),x(w=>{const F=ue(l,g,w);if(v){const h=ne(l,c,F);h.hasError?I(l,h.error):D(l)}return F}),!v&&n&&I(l,null)},[]),fe=p.useCallback(l=>{x(g=>{const v=typeof l=="function"?l(g):l;return A(A({},g),v)}),n&&K()},[]),pe=p.useCallback((l,g)=>{L(l),x(v=>it(l,g,v)),j(v=>pt(l,g,v))},[]),V=p.useCallback((l,g)=>{L(l),x(v=>gt(l,g,v)),j(v=>De(l,g,v,-1))},[]),ee=p.useCallback((l,g,v)=>{L(l),x(w=>bt(l,g,v,w)),j(w=>De(l,v,w,1))},[]),U=p.useCallback(()=>{const l=be(c,m);return j(l.errors),l},[m,c]),re=p.useCallback(l=>{const g=ne(l,c,m);return g.hasError?I(l,g.error):D(l),g},[m,c]),C=(l,{type:g="input",withError:v=!0,withFocus:w=!0}={})=>{const h={onChange:jt(O=>G(l,O))};return v&&(h.error=_[l]),g==="checkbox"?h.checked=E(l,m):h.value=E(l,m),w&&(h.onFocus=()=>f(O=>he(A({},O),{[l]:!0})),h.onBlur=()=>{if(Re(l,i)){const O=ne(l,c,m);O.hasError?I(l,O.error):D(l)}}),h},ge=(l,g)=>v=>{v==null||v.preventDefault();const w=U();w.hasErrors?g==null||g(w.errors,m,v):l==null||l(d(m),v)},R=l=>d(l||m),te=p.useCallback(l=>{l.preventDefault(),Z()},[]),B=l=>{if(l){const v=E(l,u);if(typeof v=="boolean")return v;const w=E(l,m),F=E(l,$.current);return!Ee(w,F)}return Object.keys(u).length>0?Le(u):!Ee(m,$.current)},ve=p.useCallback(l=>Le(y,l),[y]),X=p.useCallback(l=>l?!ne(l,c,m).hasError:!be(c,m).hasErrors,[m,c]);return{values:m,errors:_,setValues:fe,setErrors:Q,setFieldValue:G,setFieldError:I,clearFieldError:D,clearErrors:K,reset:Z,validate:U,validateField:re,reorderListItem:pe,removeListItem:V,insertListItem:ee,getInputProps:C,onSubmit:ge,onReset:te,isDirty:B,isTouched:ve,setTouched:f,setDirty:b,resetTouched:q,resetDirty:de,isValid:X,getTransformedValues:R}}const At=()=>{const[e,r]=p.useState([]),[t,s]=p.useState(!1),[n,a]=p.useState(!1),i=$r({timeout:1400}),d=$t({initialValues:{title:"",isProtected:!1,password:"",questions:[{id:1,key:k(),type:"radio",label:"",answers:[{id:1,key:k(),label:""},{id:2,key:k(),label:""}]}]},validate:{title:u=>u==""?"Veuillez renseigner le titre du sondage":null}});p.useEffect(()=>{console.log("errors useeffect",e)},[e]);function c(u){f(d.values),console.log("errors",e)}const y=u=>d.values.questions.map(function(b){return b.key}).indexOf(u);function f(u){r([]);let b=!1;if(u.questions.length==0){r(["Veuillez ajouter au moins une question"]);return}if(u.questions.forEach(m=>{let x=y(m.key),_=null;m.label==""&&(_=" ",b=!0),d.setFieldValue(`questions.${x}.error`,_),m.answers.length>0&&m.answers.forEach(j=>{let $=null,N=m.answers.map(function(q){return q.key}).indexOf(j.key);j.label==""&&($=" ",b=!0),d.setFieldValue(`questions.${x}.answers.${N}.error`,$)})}),b)r(["Veuillez renseigner les champs nécessaires"]);else if(e.length==0){let m=u;const _={method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify(m)};s(!0),fetch("/poll",_).then(j=>j.json()).then(j=>{if(j.success){console.log("res",j),a({success:j.success,message:j.result.message,link:j.result.data.pollLink});return}a({message:j.message}),console.log("opened",n)})}}return o.jsxs(o.Fragment,{children:[o.jsx(dr,{children:o.jsx("title",{children:"Nouveau sondage"})}),o.jsxs("div",{className:"min-h-screen",children:[o.jsx(vr,{}),o.jsxs(hr,{pos:"relative",children:[o.jsx(wr,{visible:t,overlayBlur:2,radius:""}),o.jsx(mr,{order:2,children:"Nouveau sondage"}),o.jsx(z,{className:`shadow-lg rounded-xl
                            p-2 sm:p-8`,children:o.jsxs("form",{className:"py-4",onSubmit:d.onSubmit(u=>c()),children:[o.jsxs(z,{pos:"relative",children:[o.jsx(ae,{my:"md"}),o.jsx(we,{size:"md",mb:"xl",placeholder:"Ex: questionnaire rentrée 2023",label:"Titre du sondage",withAsterisk:!0,...d.getInputProps("title")}),o.jsx(ae,{my:"xl"}),o.jsx(rt,{form:d}),o.jsx(ae,{my:"xl"}),e.length>0&&o.jsx(yr,{className:"bg-red-50/80",mt:"md",radius:"lg",py:"sm",children:o.jsx(Oe,{size:"sm",children:e.map((u,b)=>o.jsx(Oe.Item,{children:o.jsx(P,{size:"sm",fw:"sm",className:" text-red-500",children:u})},b))})})]}),o.jsx(Y,{disabled:t,size:"lg",fz:"md",radius:"md",type:"submit",color:"teal",fullWidth:!0,mt:"lg",children:"Créer"})]})})]}),o.jsx(br,{className:"relative"}),o.jsx(xr,{zIndex:999,radius:"lg",opened:n,onClose:()=>{},withCloseButton:!1,centered:!0,children:o.jsxs(Qe,{className:"flex flex-col py-3",children:[n.success?o.jsx(_r,{size:50,className:"text-teal-500"}):o.jsx(Or,{size:50,className:"text-red-400"}),o.jsx(P,{my:"xl",fz:"md",className:"text-gray-700",weight:600,children:n.message}),o.jsx(P,{my:"xl",fz:"md",className:"text-gray-700 px-3",weight:400,children:"Vous pouvez désormais visiter votre sondage sur le lien suivant"}),o.jsxs(M,{className:"font-light relative w-full border border-solid border-gray-200 py-2 rounded-sm justify-around",children:[o.jsx(Sr,{href:n.link,children:n.link}),o.jsx(z,{className:"relative left-2 bottom-[0.5]",children:o.jsx(Cr,{label:i.copied?"Copié":"Copier",withArrow:!0,position:"right",children:o.jsx(je,{color:i.copied?"teal":"gray",variant:"subtle",onClick:()=>i.copy(n.link),children:i.copied?o.jsx(Pr,{size:16}):o.jsx(kr,{size:16})})})})]}),n.success?o.jsxs(o.Fragment,{children:[" ",o.jsx(Y,{size:"lg",fz:"md",radius:"md",color:"teal",fullWidth:!0,mt:"lg",variant:"outline",component:"a",href:"/",children:"Accueil"})]}):o.jsx(Y,{size:"lg",fz:"md",radius:"md",color:"teal",fullWidth:!0,mt:"lg",variant:"outline",onClick:()=>{a(!1),s(!1)},children:"Réessayer"})]})})]})]})};export{At as default};
